<html>
<head>
    <meta charset="utf-8">
    <title>
        欢迎界面
    </title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <link rel="stylesheet" href="css/main.css" media="all">
    <link rel="stylesheet" href="lib/bootstrap/css/bootstrap.css" media="all">
    <link rel="stylesheet" href="lib/bootstrap/js/bootstrap.min.js" media="all">
</head>
<body>
<style type="text/css">
    legend { display: block; width:100px; border-bottom:0px; font-family: "Microsoft YaHei","Helvetica Neue";}
    legend a{ color:#666;} legend a:hover{ text-decoration:none;}
    .layui-table{ font-family: "Microsoft YaHei","Helvetica Neue";}
</style>
<div class="x-body" style="background-color: #f3f3f3; margin: 0;">
    <blockquote class="layui-elem-quote">
        欢迎使用毕业管理系统！<span class="f-14">v1.0</span> &nbsp;&nbsp;登录次数：520
    </blockquote>
    <div class="row">
        <div class="col-xs-6 col-sm-4 col-md-3">
            <section class="panel">
                <div class="symbol">
                    <img src="images/homeIcon1.png" width="71" alt="">
                </div>
                <div class="value tab-menu" bind="1">
                    <a href="javascript:;" data-url="user-info.html" data-parent="true" data-title="总学生人数"> <span>总学生人数</span></a>
                    <a href="javascript:;" data-url="user-info.html" data-parent="true" data-title="总学生人数">
                        <h1>45</h1>
                    </a>
                </div>
            </section>
        </div>
        <div class="col-xs-6 col-sm-4 col-md-3">
            <section class="panel">
                <div class="symbol">
                    <img src="images/homeIcon2.png" width="71" alt="">
                </div>
                <div class="value tab-menu" bind="1">
                    <a href="javascript:;" data-url="user-info.html" data-parent="true" data-title="总教师人数"> <span>总教师人数</span></a>
                    <a href="javascript:;" data-url="user-info.html" data-parent="true" data-title="总教师人数">
                        <h1>60</h1>
                    </a>
                </div>
            </section>
        </div>

        <div class="col-xs-6 col-sm-4 col-md-3">
            <section class="panel">
                <div class="symbol">
                    <img src="images/homeIcon3.png" width="71" alt="">
                </div>
                <div class="value tab-menu" bind="1">
                    <a href="javascript:;" data-url="user-info.html" data-parent="true" data-title="总管理员人数数"><span>总管理员人数数</span></a>
                    <a href="javascript:;" data-url="user-info.html" data-parent="true" data-title="总管理员人数数">
                        <h1>3</h1>
                    </a>
                </div>
            </section>
        </div>

        <div class="col-xs-6 col-sm-4 col-md-3">
            <section class="panel">
                <div class="symbol">
                    <img src="images/homeIcon4.png" width="71" alt="">
                </div>
                <div class="value tab-menu" bind="1">
                    <a href="javascript:;" data-url="user-info.html" data-parent="true" data-title="完成数量"> <span>完成数量</span></a>
                    <a href="javascript:;" data-url="user-info.html" data-parent="true" data-title="完成数量">
                        <h1>10</h1>
                    </a>

                </div>
            </section>
        </div>

    </div>

    <fieldset class="layui-elem-field layui-field-title site-title">
        <legend><a name="default">信息统计</a></legend>
    </fieldset>

    <!--相关统计-->
    <div class="row">
        <div class="col-sm-4">
            <section class="panel">
                <div class="panel-heading">学生人数 <span style="position: absolute;
                        right: 30px;
                        top: 24px;
                        font-size: 12px;
                        color: #999;
                        font-weight: 400;">学生人数统计(人)</span></div>
                <div class="panel-body">
                    <div class="echarts" id="area" style="height:300px; height:350px"></div>
                </div>
            </section>
        </div>
        <div class="col-sm-4">
            <section class="panel">
                <div class="panel-heading">完成/未完成度 <div class="labelIndexBox"><span class="labelIndexleft">完成(个)</span> <span class="labelIndexrit">未完成</span></div></div>
                <div class="panel-body">
                    <div class="echarts" id="main" style="height:300px; height:350px"></div>
                </div>
            </section>
        </div>
        <div class="col-sm-4">
            <section class="panel">
                <div class="panel-heading">分配信息</div>
                <div class="panel-body">
                    <div class="echarts" id="years" style="height:300px; height:350px"></div>
                </div>
            </section>
        </div>
        <div class="col-sm-4">
            <section class="panel">
                <div class="panel-heading">最新活动</div>
                <div class="panel-body" style="padding-top: 0px;">
                    <ul class="list-group clear-list m-t">
                        <li class="list-group-item fist-item"> <span class="float-right"> 09:00 </span> <span class="label label-success">1</span> 活动1 </li>
                        <li class="list-group-item"> <span class="float-right"> 10:16 </span> <span class="label label-info">2</span> 活动2 </li>
                        <li class="list-group-item"> <span class="float-right"> 08:22 </span> <span class="label label-primary">3</span> 活动3 </li>
                        <li class="list-group-item"> <span class="float-right"> 11:06 </span> <span class="label label-warning">4</span> 活动4 </li>
                        <li class="list-group-item"> <span class="float-right"> 12:00 </span> <span class="label label-warning">5</span> 活动5 </li>
                        <li class="list-group-item"> <span class="float-right"> 08:22 </span> <span class="label label-warning">6</span> 活动6 </li>
                        <li class="list-group-item"> <span class="float-right"> 11:06 </span> <span class="label label-warning">7</span> 活动7 </li>
                        <li class="list-group-item"> <span class="float-right"> 12:00 </span> <span class="label label-warning">8</span> 活动8 </li>
                        <li class="list-group-item"> <span class="float-right"> 11:06 </span> <span class="label label-warning">9</span> 活动9 </li>
                        <li class="list-group-item"> <span class="float-right"> 12:00 </span> <span class="label label-warning">10</span> 活动10 </li>
                    </ul>
                </div>
            </section>
        </div>
        <div class="col-sm-4">
            <section class="panel">
                <div class="panel-heading">最新信息</div>
                <div class="panel-body" style="padding-top: 0px;">
                    <ul class="list-group clear-list m-t">
                        <li class="list-group-item" style="border-top: none !important;"> <span class="float-right"> 09:00 &nbsp;<b style="color: #D68F49">已受理</b></span> <span class="label label-danger">1</span> 信息 </li>
                        <li class="list-group-item"> <span class="float-right"> 10:16 &nbsp;<b style="color: #D68F49">已受理</b></span> <span class="label label-info">2</span> 信息 </li>
                        <li class="list-group-item"> <span class="float-right"> 08:22 &nbsp;<b style="color: #D68F49">已受理</b></span> <span class="label label-warning">3</span> 信息 </li>
                        <li class="list-group-item"> <span class="float-right"> 11:06 &nbsp;<b style="color: #D68F49">已受理</b></span> <span class="label label-default">4</span> 信息 </li>
                        <li class="list-group-item"> <span class="float-right"> 12:00 &nbsp;<b style="color: #FF7700">未受理</b></span> <span class="label label-default">5</span> 信息 </li>
                        <li class="list-group-item"> <span class="float-right"> 08:22 &nbsp;<b style="color: #FF7700">未受理</b></span> <span class="label label-default">6</span> 信息 </li>
                        <li class="list-group-item"> <span class="float-right"> 11:06 &nbsp;<b style="color: #FF7700">未受理</b></span> <span class="label label-default">7</span> 信息 </li>
                        <li class="list-group-item"> <span class="float-right"> 12:00 &nbsp;<b style="color: #D68F49">已受理</b></span> <span class="label label-default">8</span> 信息 </li>
                        <li class="list-group-item"> <span class="float-right"> 11:06 &nbsp;<b style="color: #D68F49">已受理</b></span> <span class="label label-default">9</span> 信息 </li>
                        <li class="list-group-item"> <span class="float-right"> 12:00 &nbsp;<b style="color: #D68F49">已受理</b></span> <span class="label label-default">10</span> 信息 </li>
                    </ul>
                </div>
            </section>
        </div>
        <div class="col-sm-4">
            <section class="panel" style="min-height: 500px;">
                <div class="panel-heading">系统信息</div>
                <div class="layui-card">

                    <div class="layui-card-body ">

                        <table class="layui-table welcome" style="text-align: left !important; padding-left:20px;">
                            <thead>
                            <tr>
                                <th colspan="4" scope="col" style="text-align: left !important; padding-left:20px;">服务器信息</th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr>
                                <th>服务器计算机名</th>
                                <td><span id="lbServerName">http://127.0.0.1/</span></td>

                            </tr>
                            <tr>
                                <td>服务器IP地址</td>
                                <td>192.168.1.1</td>
                            </tr>
                            <tr>
                                <td>服务器域名</td>
                                <td>www.xxx.net</td>

                            </tr>
                            <tr>
                                <td>服务器端口 </td>
                                <td>80</td>
                            </tr>
                            <tr>
                                <td>服务器IIS版本 </td>
                                <td>Microsoft-IIS/6.0</td>

                            </tr>
                            <tr>
                                <td>本文件所在文件夹 </td>
                                <td>D:\WebSite\</td>
                            </tr>
                            <tr>
                                <td>服务器操作系统 </td>
                                <td>Microsoft Windows NT 5.2.3790 Service Pack 2</td>

                            </tr>
                            <tr>
                                <td>系统所在文件夹 </td>
                                <td>C:\WINDOWS\system32</td>
                            </tr>
                            <tr>
                                <td>服务器脚本超时 </td>
                                <td>30000秒</td>

                            </tr>
                            <!-- <tr>
                                <td>服务器的语言种类 </td>
                                <td>Chinese (People's Republic of China)</td>
                            </tr> -->

                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

        </div>

    </div>

    <!--Vue js脚本-->
    <script src="js/vue.js" charset="utf-8"></script>
    <!--引入ElementUI组件库-->
    <script src="js/index.js" charset="utf-8"></script>
    <!--引入Axios js脚本-->
    <script src="js/axios.js" charset="utf-8"></script>

    <script src="lib/layui/layui.js" charset="utf-8"></script>\
    <script src="js/jquery.min.js"></script>
    <script src="js/echarts.min.js"></script>
    <script>
        var app = new Vue({
            el:"#app",//声明当前Vue在页面的作用域
            data:{
                checkedIDs:[],
                communityList:[],
                total:10,
                searchMap:{"session":"","major":"","teaName":"","topicTitle":"","status":"","pageNum":1,"pageSize":10},
                selectDate:['',''],
                SessionOptions:{},
                MajorOptions:[],

                status: [{
                    value: '1',
                    label: '已完成'
                }, {
                    value: '0',
                    label: '未完成'
                }],
                value3: '',
            },
            methods:{
                //获取所有的专业
                getAllMajor(){
                    axios.post("/teacher/getMajorsByDep").then((res)=>{
                        this.MajorOptions = res.data.data;
                    });
                },
                //分页条件查询课题选题列表
                search(){
                    axios.post("/teacher/searchAllTopic",this.searchMap).then((res)=>{
                        app.communityList = res.data.data;
                        app.total = res.data.total;
                        console.log(app.communityList);
                    });
                },
                //单个删除
                del_one(id){
                    this.$confirm('请问您是否要删除该学生信息?', '提示', {
                        confirmButtonText: '确定',
                        cancelButtonText: '取消',
                        type: 'warning'
                    }).then(() => {
                        //把选中的ID封装到集合中
                        this.checkedIDs.push(id);
                        //执行删除操作
                        axios.post("/community/del",this.checkedIDs).then((res)=>{
                            if(res.data.flag){
                                this.$message({
                                    type: 'success',
                                    message: '删除成功!'
                                });
                            }
                            //删除成功，把选中的ID列表置为空
                            this.checkedIDs = [];
                            //把页面置为1，重新获取列表数据
                            this.searchMap.pageNum = 1;
                            this.search();
                        });

                    }).catch(() => {
                        this.$message({
                            type: 'info',
                            message: '已取消删除'
                        });
                    });
                },
            },
            created:function () {//Vue生命周期方法，加载页面时会执行该方法
                layui.use(['laydate','element','laypage','layer'], function(){
                    $ = layui.jquery;//jquery
                    layer = layui.layer;//弹出层
                    okLoading.close($);
                    layer.ready(function(){ //为了layer.ext.js加载完毕再执行
                        layer.photos({
                            photos: '#x-img'
                        });
                    });
                });
                //初始页面获取小区列表信息
                this.search();
                this.getAllMajor();
                console.log("能用");
                for (let i = 0; i <100; i++) {
                    this.SessionOptions[i] = 2001+i;
                }
            },
        });

    </script>

    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('main'));

        // 指定图表的配置项和数据

        let date = new Date().getFullYear() + "-" + (new Date().getMonth() + 1) + "-" + new Date().getDate();;
        option = {

            // tooltip: {
            //     trigger: 'axis',
            //     backgroundColor: "rgba(255, 255, 255, 1)",
            //     textStyle:{
            //         color: '#999'
            //     },
            //     extraCssText:'box-shadow: 0 0 5px #ccc',
            //     formatter(params){
            //         return `<div>${date} <br/>${params[0].seriesName}：${params[0].value}<br/>${params[1].seriesName}：${params[1].value}%</div>`
            //     }
            // },

            // grid: {
            //     top: 'middle',
            //     left: '3%',
            //     right: '4%',
            //     bottom: '3%',
            //     height: '80%',
            //     containLabel: true
            // },
            xAxis: {
                data: []
                // axisLine: {
                //     lineStyle: {
                //         color: "#9e9e9e",
                //     }
                // },
                // axisLabel:{
                //     color:'#9e9e9e',
                //     fontWeight:'bold'
                // },
                // axisTick:{
                //     show:false,
                // },
                // axisPointer:{
                //     lineStyle:{
                //         color:'#D11F1F'
                //     }
                // },
            },
            yAxis: {
                //type: 'value',
                // splitLine: {
                //     lineStyle: {
                //         type: 'solid',
                //         color: '#eeeeee',
                //         width:1
                //     }
                // },
                // axisTick:{
                //     show:false,
                // },
                // axisLine: {
                //     show: false,
                //     lineStyle: {
                //         color: "#9e9e9e",
                //     },
                // },
                //
                // splitArea: {
                //     show: false
                // },
            },
            series: [{
                name: '完成（次）',
                type: 'line',
                // symbol: 'none',
                data: []
                // color: "#ff7700",
                // lineStyle: {
                //     normal: {
                //         width: 2.5,
                //         color: '#ff7700',
                //     }
                // },
                // hoverAnimation: false,
                // smooth: true,
            }
            // },{
            //     name: '未完成',
            //     type: 'line',
            //     symbol:'none',
            //     data:  [],
            //     color: "#ffd88d",
            //     lineStyle: {
            //         normal: {
            //             width: 2.5,
            //             color: '#ffd88d',
            //         }
            //     },
            //     hoverAnimation:false,
            //     smooth:true,
            // }
            ]
        };

        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
        myChart.showLoading();    //数据加载完之前先显示一段简单的loading动画
        var names = [];    //类别数组（实际用来盛放X轴坐标值）
        var nums = [];    //销量数组（实际用来盛放Y坐标值）

        $.ajax({
            type: "post",
            async: true,            //异步请求（同步请求将会锁住浏览器，用户其他操作必须等待请求完成才可以执行）
            url: "/Manager/findS",    //请求发送到TestServlet处
            data: {},
            dataType: "json",        //返回数据形式为json
            success: function (result) {
                //请求成功时执行该函数内容，result即为服务器返回的json对象
                if (result) {
                    for (var i = 0; i < result.length; i++) {
                        names.push(result[i].StuName);    //挨个取出类别并填入类别数组
                    }
                    for (var i = 0; i < result.length; i++) {
                        nums.push(result[i].gender);    //挨个取出销量并填入销量数组
                    }
                    myChart.hideLoading();    //隐藏加载动画
                    myChart.setOption({        //加载数据图表
                        xAxis: {
                            data: names
                        },
                        series: [{
                            // 根据名字对应到相应的系列
                            name: '性别',
                            data: nums
                        }]
                    });

                }

            },
            error: function (errorMsg) {
                //请求失败时执行该函数
                // alert("图表请求数据失败!");
                myChart.hideLoading();
            }
        })
    </script>
    <script type="text/javascript">
        // 指定图表的配置项和数据
        var myChart = echarts.init(document.getElementById('area'));

        // 指定图表的配置项和数据
        var option = {
            tooltip: {
                trigger: 'item',
                backgroundColor: "rgba(255, 255, 255, 1)",
                textStyle:{
                    color: '#999'
                },
                extraCssText:'box-shadow: 0 0 5px #ccc',
                formatter: "{a} <br/>{b} : {c} ({d}%)",
            },
            itemStyle: {
                normal: {
                    //好，这里就是重头戏了，定义一个list，然后根据所以取得不同的值，这样就实现了，
                    color: function(params) {
                        // build a color map as your need.
                        var colorList = [
                            "#FA9660", "#F8917E", "#FFD586", "#D68F49", "#DADADA",
                        ];
                        return colorList[params.dataIndex]
                    },
                    //以下为是否显示，显示位置和显示格式的设置了
                    label: {
                        show: true,
                        position: 'top',
                        formatter: '{b}\n{c}'
                    }
                }
            },
            label: {
                normal: {
                    show: true,
                    formatter: "{c} ",
                    textStyle: {
                        fontSize: this.standSize / 150,
                        color: "#999"
                    },
                },
            },
            legend: {
                icon: 'circle',
                orient: 'vertical',
                itemWidth: 8,
                itemHeight: 8,
                right:0,
                bottom:0,
                data: ['计科191', '计科192', '计科193', '计科194', '计科195']
            },
            series: [{
                name: '学生人数',
                type: 'pie',
                radius: '55%',
                center: ['50%', '40%'],
                data: [
                    { value: 6335, name: '计科191' },
                    { value: 4310, name: '计科192' },
                    { value: 2310, name: '计科193' },
                    { value: 1010, name: '计科194' },
                    { value: 810, name: '计科195' }
                ],
                itemStyle: {
                    emphasis: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }]
        };
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
        myChart.currentIndex = -1;
        setInterval(function () {
            var dataLen = option.series[0].data.length;
            /*console.log(dataLen);*/
            // 取消之前高亮的图形
            myChart.dispatchAction({
                type: 'downplay',
                seriesIndex: 0,
                dataIndex: myChart.currentIndex
            });
            myChart.currentIndex = (myChart.currentIndex + 1) % dataLen;
            // 高亮当前图形
            myChart.dispatchAction({
                type: 'highlight',
                seriesIndex: 0,
                dataIndex: myChart.currentIndex
            });
        }, 2000);

        // 使用刚指定的配置项和数据显示图表。
        /*myChart.setOption(option);*/
        window.addEventListener("resize",function(){
            myChart.resize();
        });
    </script>
    <script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChart = echarts.init(document.getElementById('years'));
        //var myChart = echarts.init(document.getElementById('chart2'));
        var ydata = [{
            name: 'XXXX',
            value: 18
        },
            {
                name: 'XXXX',
                value: 16
            },
            {
                name: 'XXXX',
                value: 15
            },
            {
                name: 'XXXX',
                value: 14
            },
            {
                name: 'XXXX',
                value: 10
            }
        ];
        var color = ["#FA9660", "#DADADA", "#FFD586", "#F8917E", "#D68F49"]
        var xdata = ['XXXX', "XXXX", "XXXX", "XXXX", 'XXXX'];


        option = {
            /*backgroundColor: "rgba(255,255,255,1)",*/
            color: color,
            legend: {
                icon: "circle",
                x: "right",
                right: "10",
                bottom: "0",
                data: xdata,
                itemWidth: 8,
                itemHeight: 8,
                textStyle: {
                    color: '#000'
                },
                /*itemGap: 16,*/
                /*formatter:function(name){
                  var oa = option.series[0].data;
                  var num = oa[0].value + oa[1].value + oa[2].value + oa[3].value+oa[4].value + oa[5].value + oa[6].value + oa[7].value+oa[8].value + oa[9].value ;
                  for(var i = 0; i < option.series[0].data.length; i++){
                      if(name==oa[i].name){
                          return ' '+name + '    |    ' + oa[i].value + '    |    ' + (oa[i].value/num * 100).toFixed(2) + '%';
                      }
                  }
                }*/
                formatter: function(name) {
                    return '' + name
                }
            },
            series: [{
                type: 'pie',
                clockwise: false, //饼图的扇区是否是顺时针排布
                minAngle: 2, //最小的扇区角度（0 ~ 360）
                radius: ["50%", "70%"],
                center: ["50%", "50%"],
                avoidLabelOverlap: false,
                itemStyle: { //图形样式
                    normal: {
                        borderColor: '#ffffff',
                        borderWidth: 1,
                    },
                },

                label: {
                    normal: {
                        show: false,
                        position: 'center',
                        formatter: '{b}\n{c} ({d}%)',
                        rich: {
                            text: {
                                color: "#fff",
                                fontSize: 14,
                                align: 'center',
                                verticalAlign: 'middle',
                                padding: 8
                            },
                            value: {
                                color: "#8693F3",
                                fontSize: 24,
                                align: 'center',
                                verticalAlign: 'middle',
                            },
                        }
                    },
                    emphasis: {
                        show: true,
                        textStyle: {
                            fontSize: 24,
                        }
                    }
                },
                data: ydata
            }]
        };
        myChart.setOption(option);
        myChart.currentIndex = -1;

        setInterval(function () {
            var dataLen = option.series[0].data.length;
            // 取消之前高亮的图形
            myChart.dispatchAction({
                type: 'downplay',
                seriesIndex: 0,
                dataIndex: myChart.currentIndex
            });
            myChart.currentIndex = (myChart.currentIndex + 1) % dataLen;
            // 高亮当前图形
            myChart.dispatchAction({
                type: 'highlight',
                seriesIndex: 0,
                dataIndex: myChart.currentIndex
            });
        }, 2000);

        // 使用刚指定的配置项和数据显示图表。
        /*myChart.setOption(option);*/
        window.addEventListener("resize",function(){
            myChart.resize();
        });
        // 使用刚指定的配置项和数据显示图表。
        myChart.setOption(option);
    </script>


</div>
<div class="layui-footer footer footer-demo">
    <div class="layui-main">
        <p>
            <a href="/">
                Copyright ©2017 17sucai.com All Rights Reserved.
            </a>
        </p>

    </div>
</div>

</body>
</html>